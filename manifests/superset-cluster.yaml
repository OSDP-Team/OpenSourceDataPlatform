apiVersion: superset.stackable.tech/v1alpha1
kind: SupersetCluster
metadata:
  name: simple-superset
  namespace: default
spec:
  image:
    productVersion: 4.1.1
  clusterConfig:
    credentialsSecret: superset-credentials
    listenerClass: external-unstable
    authentication:
      - authenticationClass: keycloak
        oidc:
          clientCredentialsSecret: superset-oidc-secret
          extraScopes:
            - email
            - profile
        userRegistration: true
        userRegistrationRole: Public
  nodes:
    roleGroups:
      default:
        config:
          rowLimit: 10000
          webserverTimeout: 300
        podOverrides:
          env:
            - name: REQUESTS_CA_BUNDLE
              value: /stackable/secrets/keycloak-ca/ca.crt
